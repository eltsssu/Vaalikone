<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>

<h1>Kysymyksien hallinta</h1>
<body>

	<div id='yksikysymys'>T‰h‰n tulee Yksi kysymys</div>

	

	<form id='lomake' onsubmit="return true;">
		<label>Kysymys </label><input type='text' name='kysymys' value=''>
	</form>
	
	<button onclick="lahetayksikysymys();">Lis‰‰</button>

</body>

<script>
	function lahetayksikysymys() {

		var lomake = document.getElementById("lomake");

		var kyssari = new Object();

		kyssari.kysymys = lomake.kysymys.value;

		var jsonKysymys = JSON.stringify(kyssari);

		// 		document.getElementById("yksikysymys").innerHTML = jsonKysymys;
		// 		document.getElementById("yksikysymys").innerHTML = JSON
		// 				.stringify(jsonKysymys);

		var xhttp = new XMLHttpRequest();

		xhttp.onreadystatechange = function() {
 			if (this.readyState == 4 && this.status == 200) {
// 				 				document.getElementById("yksikysymys").innerHTML = this.responseText;
				var palautettu = JSON.parse(this.responseText);
				document.getElementById("yksikysymys").innerHTML = "Kysymys="
						+ palautettu.kysymys;
			}
			
			// 			else {
			// 				document.getElementById("yksiriista").innerHTML = "Problems!";
			// 			}
		};

		xhttp.open("POST", "./rest/kysymyspalvelu/lisaaKysymys", true);
		//		xhttp.setRequestHeader("Content-type","text/plain");
		xhttp.setRequestHeader("Content-type", "application/json");
		//		xmlhttp.setRequestHeader("Data-type","json");
		xhttp.send(jsonKysymys);

	}

// 	function luepenantaulujaksoittain() {
// 		setInterval(luepenantaulunuusin, 3000);
// 	}
</script>
</html>